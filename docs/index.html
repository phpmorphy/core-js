<!DOCTYPE html>
<html lang="en">

<head>
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>UMI Core - JavaScript - Home</title>

  <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="./build/entry.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,400,700|Inconsolata,700" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link type="text/css" rel="stylesheet" href="https://jmblog.github.io/color-themes-for-google-code-prettify/themes/tomorrow-night.min.css">
  <link type="text/css" rel="stylesheet" href="styles/app.min.css">
  <link type="text/css" rel="stylesheet" href="styles/iframe.css">
  <link type="text/css" rel="stylesheet" href="">
  <script async defer src="https://buttons.github.io/buttons.js"></script>

  
</head>



<body class="layout small-header">
    <div id="stickyNavbarOverlay"></div>
    

<div class="top-nav">
    <div class="inner">
        <a id="hamburger" role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
        <div class="logo">
            
             
                <a href="index.html">
                    <h1 class="navbar-item">UMI Core - JavaScript</h1>
                </a>
            
        </div>
        <div class="menu">
            
            <div class="navigation">
                <a
                    href="index.html"
                    class="link"
                >
                    API Documentation
                </a>
                
                 
                    
                        <a
                            class="link user-link "
                            href="https://github.com/umi-top/umi-core-js"
                        >
                            GitHub
                        </a>
                    
                        <a
                            class="link user-link "
                            href="https://umi.top"
                        >
                            UMI
                        </a>
                    
                
                
            </div>
        </div>
    </div>
</div>
    <div id="main">
        <div
            class="sidebar "
            id="sidebarNav"
        >
            
            <nav>
                
                    <h2><a href="index.html">Documentation</a></h2><div class="category"><h3>Classes</h3><ul><li><a href="Address.html">Address</a></li><li><a href="PublicKey.html">PublicKey</a></li><li><a href="SecretKey.html">SecretKey</a></li><li><a href="Transaction.html">Transaction</a></li></ul><h3>Global</h3><ul><li><a href="global.html#base64Decode">base64Decode</a></li><li><a href="global.html#base64Encode">base64Encode</a></li><li><a href="global.html#hexDecode">hexDecode</a></li><li><a href="global.html#hexEncode">hexEncode</a></li><li><a href="global.html#textDecode">textDecode</a></li><li><a href="global.html#textEncode">textEncode</a></li></ul></div>
                
            </nav>
        </div>
        <div class="core" id="main-content-wrapper">
            <div class="content">
                <header class="page-title">
                    <p></p>
                    <h1>Home</h1>
                </header>
                



    


    <h3> </h3>










    




    <section>
        <article><h1 align="center">
  <a href="https://umi.top"><img src="https://umi-top.github.io/umi-core-js/logo.svg" alt="UMI" width="200"></a>
  <br>
  UMI Core - JavaScript Library
  <br>
  <br>
</h1>
<p align="center">
  <!-- build      --><a href="https://travis-ci.org/umi-top/umi-core-js"><img alt="travis" src="https://img.shields.io/travis/umi-top/umi-core-js/master"></a>
  <!-- coverage   --><img alt="Coveralls github branch" src="https://img.shields.io/coveralls/github/umi-top/umi-core-js/master">
  <!-- code style --><a href="https://standardjs.com"><img alt="Standard" src="https://img.shields.io/badge/code_style-standard-green"></a>
  <!-- license    --><a href="https://github.com/umi-top/umi-core-js/blob/master/LICENSE"><img alt="GitHub" src="https://img.shields.io/github/license/umi-top/umi-core-js"></a>
  <!-- PGP        --><a href="https://keybase.io/umitop"><img alt="Keybase PGP" src="https://img.shields.io/keybase/pgp/umitop"></a>
  <br/>
  <!-- release    --><a href="https://github.com/umi-top/umi-core-js"><img alt="GitHub release (latest SemVer)" src="https://img.shields.io/github/v/release/umi-top/umi-core-js?sort=semver"></a>
  <!-- npm ver    --><a href="https://www.npmjs.com/package/@umi-top/umi-core-js"><img alt="npm version" src="https://img.shields.io/npm/v/@umi-top/umi-core-js"></a>
  <!-- types      --><img alt="npm type definitions" src="https://img.shields.io/npm/types/@umi-top/umi-core-js">
  <!-- node       --><a href="https://www.npmjs.com/package/@umi-top/umi-core-js"><img alt="node-current (scoped)" src="https://img.shields.io/node/v/@umi-top/umi-core-js"></a>
  <!-- downloads  --><a href="https://www.npmjs.com/package/@umi-top/umi-core-js"><img alt="npm downloads" src="https://img.shields.io/npm/dm/@umi-top/umi-core-js"></a>
</p>
<h2 id="%D0%BE%D0%B3%D0%BB%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5">Оглавление</h2>
<ul>
<li><a href="#%D0%B2%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5">Введение</a></li>
<li><a href="#%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0">Установка</a>
<ul>
<li><a href="#npm">npm</a></li>
<li><a href="#yarn">yarn</a></li>
<li><a href="#%D0%BE%D1%82%D0%B4%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D0%BC-%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%BC">Отдельным файлом</a></li>
</ul>
</li>
<li><a href="#%D0%BF%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5">Подключение</a>
<ul>
<li><a href="#commonjs">CommonJS</a></li>
<li><a href="#es-modules">ES Modules</a></li>
<li><a href="#cdn">CDN</a></li>
</ul>
</li>
<li><a href="#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80%D1%8B">Примеры</a>
<ul>
<li><a href="#%D0%BC%D0%BD%D0%B5%D0%BC%D0%BE%D0%BD%D0%B8%D0%BA%D0%B8">Мнемоники</a>
<ul>
<li><a href="#seed-%D0%B8%D0%B7-%D0%BC%D0%BD%D0%B5%D0%BC%D0%BE%D0%BD%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9-%D1%84%D1%80%D0%B0%D0%B7%D1%8B">Seed из мнемонической фразы</a></li>
</ul>
</li>
<li><a href="#%D0%BA%D0%BB%D1%8E%D1%87%D0%B8">Ключи</a>
<ul>
<li><a href="#%D0%BA%D0%BB%D1%8E%D1%87-%D0%B8%D0%B7-seed">Ключ из seed</a></li>
<li><a href="#%D0%BF%D0%BE%D0%B4%D0%BF%D0%B8%D1%81%D0%B0%D1%82%D1%8C-%D1%81%D0%BE%D0%BE%D0%B1%D1%89%D0%B5%D0%BD%D0%B8%D0%B5">Подписать сообщение</a></li>
<li><a href="#%D0%BF%D1%80%D0%BE%D0%B2%D0%B5%D1%80%D0%B8%D1%82%D1%8C-%D0%BF%D0%BE%D0%B4%D0%BF%D0%B8%D1%81%D1%8C">Проверить подпись</a></li>
</ul>
</li>
<li><a href="#%D0%B0%D0%B4%D1%80%D0%B5%D1%81%D0%B0">Адреса</a>
<ul>
<li><a href="#%D0%B0%D0%B4%D1%80%D0%B5%D1%81-%D0%B2-%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%82%D0%B5-bech32">Адрес в формате Bech32</a></li>
<li><a href="#%D0%B0%D0%B4%D1%80%D0%B5%D1%81-%D0%B8%D0%B7-%D0%BF%D1%80%D0%B8%D0%B2%D0%B0%D1%82%D0%BD%D0%BE%D0%B3%D0%BE-%D0%B8%D0%BB%D0%B8-%D0%BF%D1%83%D0%B1%D0%BB%D0%B8%D1%87%D0%BD%D0%BE%D0%B3%D0%BE-%D0%BA%D0%BB%D1%8E%D1%87%D0%B0">Адрес из приватного или публичного ключа</a></li>
<li><a href="#%D0%BF%D1%80%D0%B5%D1%84%D0%B8%D0%BA%D1%81">Префикс</a></li>
</ul>
</li>
<li><a href="#%D1%82%D1%80%D0%B0%D0%BD%D0%B7%D0%B0%D0%BA%D1%86%D0%B8%D0%B8">Транзакции</a>
<ul>
<li><a href="#%D0%BF%D0%B5%D1%80%D0%B5%D0%B2%D0%B5%D1%81%D1%82%D0%B8-%D0%BC%D0%BE%D0%BD%D0%B5%D1%82%D1%8B">Перевести монеты</a></li>
<li><a href="#%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D1%82%D1%8C-%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%82%D1%83%D1%80%D1%83">Создать структуру</a></li>
<li><a href="#%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8-%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%82%D1%83%D1%80%D1%8B">Обновить настройки структуры</a></li>
<li><a href="#%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C-%D0%B0%D0%B4%D1%80%D0%B5%D1%81-%D0%B4%D0%BB%D1%8F-%D0%BD%D0%B0%D1%87%D0%B8%D1%81%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F-%D0%BF%D1%80%D0%BE%D1%84%D0%B8%D1%82%D0%B0">Установить адрес для начисления профита</a></li>
<li><a href="#%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C-%D0%B0%D0%B4%D1%80%D0%B5%D1%81-%D0%B4%D0%BB%D1%8F-%D0%BF%D0%B5%D1%80%D0%B5%D0%B2%D0%BE%D0%B4%D0%B0-%D0%BA%D0%BE%D0%BC%D0%B8%D1%81%D1%81%D0%B8%D0%B8">Установить адрес для перевода комиссии</a></li>
<li><a href="#%D0%B0%D0%BA%D1%82%D0%B8%D0%B2%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D1%82%D1%8C-%D1%82%D1%80%D0%B0%D0%BD%D0%B7%D0%B8%D1%82%D0%BD%D1%8B%D0%B9-%D0%B0%D0%B4%D1%80%D0%B5%D1%81">Активировать транзитный адрес</a></li>
<li><a href="#%D0%B4%D0%B5%D0%B0%D0%BA%D1%82%D0%B8%D0%B2%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D1%82%D1%8C-%D1%82%D1%80%D0%B0%D0%BD%D0%B7%D0%B8%D1%82%D0%BD%D1%8B%D0%B9-%D0%B0%D0%B4%D1%80%D0%B5%D1%81">Деактивировать транзитный адрес</a></li>
<li><a href="#%D0%BE%D1%82%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D1%82%D1%80%D0%B0%D0%BD%D0%B7%D0%B0%D0%BA%D1%86%D0%B8%D1%8E-%D0%B2-%D1%81%D0%B5%D1%82%D1%8C">Отправить транзакцию в сеть</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%D0%BB%D0%B8%D1%86%D0%B5%D0%BD%D0%B7%D0%B8%D1%8F">Лицензия</a></li>
</ul>
<h2 id="%D0%B2%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5">Введение</h2>
<p>Библиотека написана на <a href="https://www.typescriptlang.org">TypeScript</a> и
скомпилирована в модули CommonJS и ES Module и работает
во всех актуальных браузерах и Node.js.<br>
Для совместимости с устаревшими браузерами скомпилирована iife версия,
поддерживается Internet Explorer 5 и выше.</p>
<h2 id="%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0">Установка</h2>
<p>Библиотека опубликована в репозитории
<a href="https://www.npmjs.com/package/@umi-top/umi-core-js">npm</a> и может быть
установлена с помощью пакетного менеджера, например,
<a href="https://docs.npmjs.com">npm</a> или <a href="https://yarnpkg.com">Yarn</a>:</p>
<h3 id="npm">npm</h3>
<pre class="prettyprint source lang-bash"><code>npm install @umi-top/umi-core-js
</code></pre>
<h3 id="yarn">yarn</h3>
<pre class="prettyprint source lang-bash"><code>yarn add @umi-top/umi-core-js
</code></pre>
<h3 id="%D0%BE%D1%82%D0%B4%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D0%BC-%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%BC">Отдельным файлом</h3>
<p>Если требуется, библиотеку можно скачать в виде отдельного файла:<br>
CommonJS: <a href="https://unpkg.com/@umi-top/umi-core-js/lib/index.js">index.js</a>,
ES Module: <a href="https://unpkg.com/@umi-top/umi-core-js/lib/index.mjs">index.mjs</a>
или IIFE <a href="https://unpkg.com/@umi-top/umi-core-js/lib/index.min.js">index.min.js</a>.<br>
Так же можно скачать аннотации типов для
TypeScript: <a href="https://unpkg.com/@umi-top/umi-core-js/lib/index.d.ts">index.d.ts</a>
и Flow: <a href="https://unpkg.com/@umi-top/umi-core-js/lib/index.js.flow">index.js.flow</a>.</p>
<h2 id="%D0%BF%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5">Подключение</h2>
<h3 id="commonjs">CommonJS</h3>
<p>Если вы используете <a href="https://nodejs.org/api/modules.html">Node.js</a>:</p>
<pre class="prettyprint source lang-javascript"><code>const umi = require('@umi-top/umi-core-js')
</code></pre>
<h3 id="es-modules">ES Modules</h3>
<p>Если вы используете <a href="https://webpack.js.org/guides/getting-started/#modules">webpack</a>,
<a href="https://rollupjs.org/guide/en/#importing">Rollup</a>,
<a href="https://parceljs.org/javascript.html">Parcel</a> или <a href="https://nodejs.org/api/esm.html">Node.js (&gt;= v13)</a>.</p>
<p>Для более эффективной работы алгоритма <a href="https://webpack.js.org/guides/tree-shaking/">tree shaking</a>
рекомендуем импортировать только используемые значения:</p>
<pre class="prettyprint source lang-javascript"><code>import { Address, PublicKey, SecretKey, Transaction } from '@umi-top/umi-core-js'
</code></pre>
<p>Импортировать все содержимое модуля.
Этот вариант будет использоваться в примерах ниже.</p>
<pre class="prettyprint source lang-javascript"><code>import * as umi from '@umi-top/umi-core-js'
</code></pre>
<h3 id="cdn">CDN</h3>
<p>Библиотеку можно использовать напрямую в браузере.</p>
<p>Если требуется максимальная совместимость, можно использовать
<a href="https://developer.mozilla.org/en-US/docs/Glossary/IIFE">IIFE</a> вариант:</p>
<pre class="prettyprint source lang-html"><code>&lt;script src=&quot;https://unpkg.com/@umi-top/umi-core-js&quot;>&lt;/script>
</code></pre>
<p>В <a href="https://caniuse.com/#feat=es6-module">современных</a> браузерах можно
импортировать <a href="https://v8.dev/features/modules">es6 модуль</a>:</p>
<pre class="prettyprint source lang-html"><code>&lt;script type=&quot;module&quot;>
import * as umi from 'https://unpkg.com/@umi-top/umi-core-js/lib/index.mjs'
&lt;/script>
</code></pre>
<h2 id="%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80%D1%8B">Примеры</h2>
<h3 id="%D0%BC%D0%BD%D0%B5%D0%BC%D0%BE%D0%BD%D0%B8%D0%BA%D0%B8">Мнемоники</h3>
<p>UMI не накладывает никаких ограничений на способ генерации и хранения приватных
ключей.<br>
Для совместимости, рекомендуем использовать
<a href="https://github.com/bitcoin/bips/blob/master/bip-0039.mediawiki">bip39</a>.</p>
<h4 id="seed-%D0%B8%D0%B7-%D0%BC%D0%BD%D0%B5%D0%BC%D0%BE%D0%BD%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9-%D1%84%D1%80%D0%B0%D0%B7%D1%8B">Seed из мнемонической фразы</h4>
<p>Пример с использованием библиотеки <a href="https://www.npmjs.com/package/bip39">bip39</a>:</p>
<pre class="prettyprint source lang-javascript"><code>// npm install bip39

const bip39 = require('bip39')
const mnemonic = bip39.generateMnemonic(256)
const seed = bip39.mnemonicToSeedSync(mnemonic)
</code></pre>
<h3 id="%D0%BA%D0%BB%D1%8E%D1%87%D0%B8">Ключи</h3>
<p>В UMI применяется <a href="https://ed25519.cr.yp.to">Ed25519</a>
(<a href="https://tools.ietf.org/html/rfc8032">RFC 8032</a>) —
схема подписи <a href="https://ru.wikipedia.org/wiki/EdDSA">EdDSA</a> использующая
<a href="https://en.wikipedia.org/wiki/SHA-2">SHA-512</a>
и <a href="https://en.wikipedia.org/wiki/Curve25519">Curve25519</a>.</p>
<h4 id="%D0%BA%D0%BB%D1%8E%D1%87-%D0%B8%D0%B7-seed">Ключ из seed</h4>
<p>Seed может быть любой длины. Оптимальным вариантом является длина 32 байта.</p>
<pre class="prettyprint source lang-javascript"><code>const seed = new Uint8Array(32)
const secretKey = umi.SecretKey.fromSeed(seed)
const publicKey = secretKey.getPublicKey()
</code></pre>
<h4 id="%D0%BF%D0%BE%D0%B4%D0%BF%D0%B8%D1%81%D0%B0%D1%82%D1%8C-%D1%81%D0%BE%D0%BE%D0%B1%D1%89%D0%B5%D0%BD%D0%B8%D0%B5">Подписать сообщение</h4>
<p>В метод <code>SecretKey#sign()</code> необходимо передать массив байтов, поэтому если
требуется подписать текстовое сообщение его нужно преобразовать:</p>
<pre class="prettyprint source lang-javascript"><code>const message = umi.textEncode('Hello World')
const signature = secretKey.sign(message)

console.log(umi.base64Encode(signature))
</code></pre>
<h4 id="%D0%BF%D1%80%D0%BE%D0%B2%D0%B5%D1%80%D0%B8%D1%82%D1%8C-%D0%BF%D0%BE%D0%B4%D0%BF%D0%B8%D1%81%D1%8C">Проверить подпись</h4>
<p>Метод <code>PublicKey#verifySignature()</code> принимает массив байтов, поэтому если
подпись передается в виде текста ее необходимо декодировать:</p>
<pre class="prettyprint source lang-javascript"><code>const address = 'umi18d4z00xwk6jz6c4r4rgz5mcdwdjny9thrh3y8f36cpy2rz6emg5s6rxnf6'
const message = umi.textEncode('Hello World')
const signature = umi.base64Decode(
  'Jbi9YfwLcxiTMednl/wTvnSzsPP9mV9Bf2vvZytP87oyg1p1c9ZBkn4gNv15ZHwEFv3bVYlowgyIKmMwJLjJCw=='
)
const pubKey = umi.Address.fromBech32(address).getPublicKey()
const isValid = pubKey.verifySignature(signature, message)

console.log(isValid ? 'true' : 'false')
</code></pre>
<h3 id="%D0%B0%D0%B4%D1%80%D0%B5%D1%81%D0%B0">Адреса</h3>
<p>UMI использует адреса в формате Bech32
(<a href="https://github.com/bitcoin/bips/blob/master/bip-0173.mediawiki">bip173</a>)
длиной 62 символа. Префикс имеет длину 3 символа.<br>
Специальным случаем являются Genesis-адреса, существующие только
в Genesis-блоке, такие адреса имеют длину 65 символов
и всегда имеют префикс <code>genesis</code>.</p>
<h4 id="%D0%B0%D0%B4%D1%80%D0%B5%D1%81-%D0%B2-%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%82%D0%B5-bech32">Адрес в формате Bech32</h4>
<p>Создать адрес из строки Bech32 можно используя статический метод <code>Address.fromBech32()</code>
и экспортировать с помощью <code>Address#getBech32()</code>:</p>
<pre class="prettyprint source lang-javascript"><code>const bech32 = 'umi18d4z00xwk6jz6c4r4rgz5mcdwdjny9thrh3y8f36cpy2rz6emg5s6rxnf6'
const address = umi.Address.fromBech32(bech32)

console.log(address.getBech32())
</code></pre>
<h4 id="%D0%B0%D0%B4%D1%80%D0%B5%D1%81-%D0%B8%D0%B7-%D0%BF%D1%80%D0%B8%D0%B2%D0%B0%D1%82%D0%BD%D0%BE%D0%B3%D0%BE-%D0%B8%D0%BB%D0%B8-%D0%BF%D1%83%D0%B1%D0%BB%D0%B8%D1%87%D0%BD%D0%BE%D0%B3%D0%BE-%D0%BA%D0%BB%D1%8E%D1%87%D0%B0">Адрес из приватного или публичного ключа</h4>
<p>Статический метод <code>Address.fromKey()</code> создает адрес из приватного
или публичного ключа:</p>
<pre class="prettyprint source lang-javascript"><code>const seed = new Uint8Array(32)
const secKey = umi.SecretKey.fromSeed(seed)
const pubKey = secKey.getPublicKey()
const address1 = umi.Address.fromKey(secKey)
const address2 = umi.Address.fromKey(pubKey)

console.log(address1.getBech32(), address2.getBech32())
</code></pre>
<h4 id="%D0%BF%D1%80%D0%B5%D1%84%D0%B8%D0%BA%D1%81">Префикс</h4>
<p>По умолчанию адреса имеют префикс <code>umi</code>.
Изменить префикс можно с помощью метода <code>Address#setPrefix()</code>:</p>
<pre class="prettyprint source lang-javascript"><code>const bech32 = 'umi18d4z00xwk6jz6c4r4rgz5mcdwdjny9thrh3y8f36cpy2rz6emg5s6rxnf6'
const address = umi.Address.fromBech32(bech32).setPrefix('aaa')

console.log(address.getBech32())
</code></pre>
<h3 id="%D1%82%D1%80%D0%B0%D0%BD%D0%B7%D0%B0%D0%BA%D1%86%D0%B8%D0%B8">Транзакции</h3>
<h4 id="%D0%BF%D0%B5%D1%80%D0%B5%D0%B2%D0%B5%D1%81%D1%82%D0%B8-%D0%BC%D0%BE%D0%BD%D0%B5%D1%82%D1%8B">Перевести монеты</h4>
<p>Поля <code>sender</code>, <code>recipient</code> и <code>value</code> являются обязательными.<br>
Сумма указывается в UMI-центах, т.е. 1.23 UMI = 123.</p>
<pre class="prettyprint source lang-javascript"><code>const secKey = umi.SecretKey.fromSeed(new Uint8Array(32))
const sender = umi.Address.fromKey(secKey).setPrefix('umi')
const recipient = umi.Address.fromKey(secKey).setPrefix('aaa')
const tx = new umi.Transaction()
  .setVersion(umi.Transaction.Basic)
  .setSender(sender)
  .setRecipient(recipient)
  .setValue(42)
  .sign(secKey)

console.log('txid:   ', umi.hexEncode(tx.getHash()))
console.log('base64: ', umi.base64Encode(tx.getBytes()))
</code></pre>
<h4 id="%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D1%82%D1%8C-%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%82%D1%83%D1%80%D1%83">Создать структуру</h4>
<p>Поля <code>sender</code>, <code>prefix</code>, <code>name</code>, <code>profitPercent</code> и <code>feePercent</code> являются
обязательными.<br>
Префикс имеет длину 3 символа. Название указывается в кодировке UTF-8 и может
иметь длину до 35 байтов. Проценты указываются в сотых долях процента,
т.е. 1.23% = 123.</p>
<pre class="prettyprint source lang-javascript"><code>const secKey = umi.SecretKey.fromSeed(new Uint8Array(32))
const sender = umi.Address.fromKey(secKey).setPrefix('umi')
const tx = new umi.Transaction()
  .setVersion(umi.Transaction.CreateStructure)
  .setSender(sender)
  .setPrefix('aaa')
  .setName('🙂')
  .setProfitPercent(500)
  .setFeePercent(2000)
  .sign(secKey)

console.log('txid:   ', umi.hexEncode(tx.getHash()))
console.log('base64: ', umi.base64Encode(tx.getBytes()))
</code></pre>
<h4 id="%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8-%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%82%D1%83%D1%80%D1%8B">Обновить настройки структуры</h4>
<p>Поля <code>sender</code>, <code>prefix</code>, <code>name</code>, <code>profitPercent</code> и <code>feePercent</code> являются
обязательными.<br>
Необходимо задать все поля, даже если они не изменились.</p>
<pre class="prettyprint source lang-javascript"><code>const secKey = umi.SecretKey.fromSeed(new Uint8Array(32))
const sender = umi.Address.fromKey(secKey).setPrefix('umi')
const tx = new umi.Transaction()
  .setVersion(umi.Transaction.UpdateStructure)
  .setSender(sender)
  .setPrefix('aaa')
  .setName('🙂')
  .setProfitPercent(500)
  .setFeePercent(2000)
  .sign(secKey)

console.log('txid:   ', umi.hexEncode(tx.getHash()))
console.log('base64: ', umi.base64Encode(tx.getBytes()))
</code></pre>
<h4 id="%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C-%D0%B0%D0%B4%D1%80%D0%B5%D1%81-%D0%B4%D0%BB%D1%8F-%D0%BD%D0%B0%D1%87%D0%B8%D1%81%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F-%D0%BF%D1%80%D0%BE%D1%84%D0%B8%D1%82%D0%B0">Установить адрес для начисления профита</h4>
<p>Поля <code>sender</code> и <code>recipient</code> являются обязательными.<br>
Адрес для начисления профита должен принадлежать структуре.</p>
<pre class="prettyprint source lang-javascript"><code>const secKey = umi.SecretKey.fromSeed(new Uint8Array(32))
const sender = umi.Address.fromKey(secKey).setPrefix('umi')
const newPrf = umi.Address.fromBech32('aaa18d4z00xwk6jz6c4r4rgz5mcdwdjny9thrh3y8f36cpy2rz6emg5svsuw66')
const tx = new umi.Transaction()
  .setVersion(umi.Transaction.UpdateProfitAddress)
  .setSender(sender)
  .setRecipient(newPrf)
  .sign(secKey)

console.log('txid:   ', umi.hexEncode(tx.getHash()))
console.log('base64: ', umi.base64Encode(tx.getBytes()))
</code></pre>
<h4 id="%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C-%D0%B0%D0%B4%D1%80%D0%B5%D1%81-%D0%B4%D0%BB%D1%8F-%D0%BF%D0%B5%D1%80%D0%B5%D0%B2%D0%BE%D0%B4%D0%B0-%D0%BA%D0%BE%D0%BC%D0%B8%D1%81%D1%81%D0%B8%D0%B8">Установить адрес для перевода комиссии</h4>
<p>Поля <code>sender</code> и <code>recipient</code> являются обязательными.<br>
Адрес для перевода комиссии должен принадлежать структуре.</p>
<pre class="prettyprint source lang-javascript"><code>const secKey = umi.SecretKey.fromSeed(new Uint8Array(32))
const sender = umi.Address.fromKey(secKey).setPrefix('umi')
const newFee = umi.Address.fromBech32('aaa18d4z00xwk6jz6c4r4rgz5mcdwdjny9thrh3y8f36cpy2rz6emg5svsuw66')
const tx = new umi.Transaction()
  .setVersion(umi.Transaction.UpdateFeeAddress)
  .setSender(sender)
  .setRecipient(newFee)
  .sign(secKey)

console.log('txid:   ', umi.hexEncode(tx.getHash()))
console.log('base64: ', umi.base64Encode(tx.getBytes()))
</code></pre>
<h4 id="%D0%B0%D0%BA%D1%82%D0%B8%D0%B2%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D1%82%D1%8C-%D1%82%D1%80%D0%B0%D0%BD%D0%B7%D0%B8%D1%82%D0%BD%D1%8B%D0%B9-%D0%B0%D0%B4%D1%80%D0%B5%D1%81">Активировать транзитный адрес</h4>
<p>Поля <code>sender</code> и <code>recipient</code> являются обязательными.<br>
Адрес должен принадлежать структуре.</p>
<pre class="prettyprint source lang-javascript"><code>const secKey = umi.SecretKey.fromSeed(new Uint8Array(32))
const sender = umi.Address.fromKey(secKey).setPrefix('umi')
const transit = umi.Address.fromBech32('aaa18d4z00xwk6jz6c4r4rgz5mcdwdjny9thrh3y8f36cpy2rz6emg5svsuw66')
const tx = new umi.Transaction()
  .setVersion(umi.Transaction.CreateTransitAddress)
  .setSender(sender)
  .setRecipient(transit)
  .sign(secKey)

console.log('txid:   ', umi.hexEncode(tx.getHash()))
console.log('base64: ', umi.base64Encode(tx.getBytes()))
</code></pre>
<h4 id="%D0%B4%D0%B5%D0%B0%D0%BA%D1%82%D0%B8%D0%B2%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D1%82%D1%8C-%D1%82%D1%80%D0%B0%D0%BD%D0%B7%D0%B8%D1%82%D0%BD%D1%8B%D0%B9-%D0%B0%D0%B4%D1%80%D0%B5%D1%81">Деактивировать транзитный адрес</h4>
<p>Поля <code>sender</code> и <code>recipient</code> являются обязательными.<br>
Адрес должен принадлежать структуре.</p>
<pre class="prettyprint source lang-javascript"><code>const secKey = umi.SecretKey.fromSeed(new Uint8Array(32))
const sender = umi.Address.fromKey(secKey).setPrefix('umi')
const transit = umi.Address.fromBech32('aaa18d4z00xwk6jz6c4r4rgz5mcdwdjny9thrh3y8f36cpy2rz6emg5svsuw66')
const tx = new umi.Transaction()
  .setVersion(umi.Transaction.DeleteTransitAddress)
  .setSender(sender)
  .setRecipient(transit)
  .sign(secKey)

console.log('txid:   ', umi.hexEncode(tx.getHash()))
console.log('base64: ', umi.base64Encode(tx.getBytes()))
</code></pre>
<h4 id="%D0%BE%D1%82%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D1%82%D1%80%D0%B0%D0%BD%D0%B7%D0%B0%D0%BA%D1%86%D0%B8%D1%8E-%D0%B2-%D1%81%D0%B5%D1%82%D1%8C">Отправить транзакцию в сеть</h4>
<p>Пример для браузера с использованием
<a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API">Fetch</a> API
(<a href="https://github.com/github/fetch">polyfill</a>):</p>
<pre class="prettyprint source lang-javascript"><code>const tx = new umi.Transaction()

fetch('https://testnet.umi.top/json-rpc', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    jsonrpc: '2.0',
    id: '',
    method: 'sendTransaction',
    params: {
      base64: umi.base64Encode(tx.getBytes())
    }
  })
}).then(function(response) {
  console.log(response.status, response.statusText)
  return response.json()
}).then(function(json) {
  console.log('parsed json', json)
}).catch(function(ex) {
  console.log('parsing failed', ex)
})
</code></pre>
<p>Пример для Node.js с использованием модуля <a href="https://nodejs.org/api/https.html">https</a>:</p>
<pre class="prettyprint source lang-javascript"><code>const umi = require('@umi-top/umi-core-js')
const https = require('https')

const tx = new umi.Transaction()

const data = JSON.stringify({
  jsonrpc: '2.0',
  id: '',
  method: 'sendTransaction',
  params: {
    base64: Buffer.from(tx.getBytes()).toString('base64')
  }
})

const options = {
  hostname: 'testnet.umi.top',
  port: 443,
  path: '/json-rpc',
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Content-Length': data.length
  }
}

const req = https.request(options, (res) => {
  console.log(`statusCode: ${res.statusCode}`)

  res.on('data', (d) => {
    process.stdout.write(d)
  })
})

req.on('error', (error) => {
  console.error(error)
})

req.write(data)
req.end()
</code></pre>
<h2 id="%D0%BB%D0%B8%D1%86%D0%B5%D0%BD%D0%B7%D0%B8%D1%8F">Лицензия</h2>
<pre class="prettyprint source lang-text"><code>Лицензия MIT

Copyright © 2020 UMI

Данная лицензия разрешает лицам, получившим копию данного программного
обеспечения и сопутствующей документации (в дальнейшем именуемыми
«Программное обеспечение»), безвозмездно использовать Программное обеспечение
без ограничений, включая неограниченное право на использование, копирование,
изменение, слияние, публикацию, распространение, сублицензирование и/или
продажу копий Программного обеспечения, а также лицам, которым предоставляется
данное Программное обеспечение, при соблюдении следующих условий:

Указанное выше уведомление об авторском праве и данные условия должны быть
включены во все копии или значимые части данного Программного обеспечения.

ДАННОЕ ПРОГРАММНОЕ ОБЕСПЕЧЕНИЕ ПРЕДОСТАВЛЯЕТСЯ «КАК ЕСТЬ», БЕЗ КАКИХ-ЛИБО
ГАРАНТИЙ, ЯВНО ВЫРАЖЕННЫХ ИЛИ ПОДРАЗУМЕВАЕМЫХ, ВКЛЮЧАЯ ГАРАНТИИ ТОВАРНОЙ
ПРИГОДНОСТИ, СООТВЕТСТВИЯ ПО ЕГО КОНКРЕТНОМУ НАЗНАЧЕНИЮ И ОТСУТСТВИЯ НАРУШЕНИЙ,
НО НЕ ОГРАНИЧИВАЯСЬ ИМИ. НИ В КАКОМ СЛУЧАЕ АВТОРЫ ИЛИ ПРАВООБЛАДАТЕЛИ НЕ НЕСУТ
ОТВЕТСТВЕННОСТИ ПО КАКИМ-ЛИБО ИСКАМ, ЗА УЩЕРБ ИЛИ ПО ИНЫМ ТРЕБОВАНИЯМ, В ТОМ
ЧИСЛЕ, ПРИ ДЕЙСТВИИ КОНТРАКТА, ДЕЛИКТЕ ИЛИ ИНОЙ СИТУАЦИИ, ВОЗНИКШИМ ИЗ-ЗА
ИСПОЛЬЗОВАНИЯ ПРОГРАММНОГО ОБЕСПЕЧЕНИЯ ИЛИ ИНЫХ ДЕЙСТВИЙ С ПРОГРАММНЫМ
ОБЕСПЕЧЕНИЕМ. 
</code></pre></article>
    </section>






            </div>
            
            <footer class="footer">
                <div class="content has-text-centered">
                    <p>Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.4</a></p>
                    <p class="sidebar-created-by">
                        <a href="https://github.com/SoftwareBrothers/better-docs" target="_blank">BetterDocs theme</a> provided with <i class="fas fa-heart"></i> by 
                        <a href="http://softwarebrothers.co" target="_blank">SoftwareBrothers - JavaScript Development Agency</a>
                    </p>
                </div>
            </footer>
            
        </div>
        <div id="side-nav" class="side-nav">
        </div>
    </div>
<script src="scripts/app.min.js"></script>
<script>PR.prettyPrint();</script>
<script src="scripts/linenumber.js"> </script>

</body>
</html>