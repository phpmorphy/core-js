/**
 * @license
 * Copyright (c) 2020 UMI
 * MIT Licensed
 */
var umi=function(e){"use strict";var t=function(){function e(t){this._bytes=new Uint8Array(e.LENGTH),this._view=new DataView(this._bytes.buffer),this._fieldsMap={},void 0!==t&&(f(t,e.LENGTH),this._bytes.set(t),this._setFields(["version","sender","recipient","value","prefix","name","profitPercent","feePercent","nonce","signature"]))}return Object.defineProperty(e,"LENGTH",{get:function(){return 150},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Genesis",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Basic",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(e,"CreateStructure",{get:function(){return 2},enumerable:!1,configurable:!0}),Object.defineProperty(e,"UpdateStructure",{get:function(){return 3},enumerable:!1,configurable:!0}),Object.defineProperty(e,"UpdateProfitAddress",{get:function(){return 4},enumerable:!1,configurable:!0}),Object.defineProperty(e,"UpdateFeeAddress",{get:function(){return 5},enumerable:!1,configurable:!0}),Object.defineProperty(e,"CreateTransitAddress",{get:function(){return 6},enumerable:!1,configurable:!0}),Object.defineProperty(e,"DeleteTransitAddress",{get:function(){return 7},enumerable:!1,configurable:!0}),e.prototype._checkFields=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];if(!Object.prototype.hasOwnProperty.call(this._fieldsMap,n))throw new Error(n+" must be set")}},e.prototype._checkVersionIsStruct=function(){if(-1===[e.CreateStructure,e.UpdateStructure].indexOf(this.version))throw new Error("unavailable for this transaction type")},e.prototype._checkVersionIsNotStruct=function(){if(-1!==[e.CreateStructure,e.UpdateStructure].indexOf(this.version))throw new Error("unavailable for this transaction type")},e.prototype._checkVersionIsBasic=function(){if(-1===[e.Genesis,e.Basic].indexOf(this.version))throw new Error("unavailable for this transaction type")},e.prototype._setFields=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];this._fieldsMap[n]=!0}},Object.defineProperty(e.prototype,"bytes",{get:function(){var e=new Uint8Array(this._bytes.byteLength);return e.set(this._bytes),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hash",{get:function(){return s(this._bytes)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._checkFields(["version"]),this._bytes[0]},set:function(t){if(Object.prototype.hasOwnProperty.call(this._fieldsMap,"version"))throw new Error("could not update version");c(t,e.Genesis,e.DeleteTransitAddress),this._bytes[0]=t,this._setFields(["version"])},enumerable:!1,configurable:!0}),e.prototype.setVersion=function(e){return this.version=e,this},Object.defineProperty(e.prototype,"sender",{get:function(){return this._checkFields(["sender"]),new y(this._bytes.subarray(1,35))},set:function(t){if(this._checkFields(["version"]),!(t instanceof y))throw new Error("address type must be Address");if(this.version===e.Genesis&&t.version!==y.Genesis)throw new Error("address version must be genesis");if(this.version!==e.Genesis&&t.version===y.Genesis)throw new Error("address version must not be genesis");this._bytes.set(t.bytes,1),this._setFields(["sender"])},enumerable:!1,configurable:!0}),e.prototype.setSender=function(e){return this.sender=e,this},Object.defineProperty(e.prototype,"recipient",{get:function(){return this._checkFields(["version"]),this._checkVersionIsNotStruct(),this._checkFields(["recipient"]),new y(this._bytes.subarray(35,69))},set:function(t){if(this._checkFields(["version"]),this._checkVersionIsNotStruct(),!(t instanceof y))throw new Error("recipient type must be Address");if(t.version===y.Genesis)throw new Error("recipient version must not be genesis");if(this.version===e.Genesis&&t.version!==y.Umi)throw new Error("recipient version must be umi");if(this.version!==e.Genesis&&this.version!==e.Basic&&t.version===y.Umi)throw new Error("recipient version must not be umi");this._bytes.set(t.bytes,35),this._setFields(["recipient"])},enumerable:!1,configurable:!0}),e.prototype.setRecipient=function(e){return this.recipient=e,this},Object.defineProperty(e.prototype,"value",{get:function(){if(this._checkFields(["version"]),this._checkVersionIsBasic(),this._checkFields(["value"]),this._view.getUint16(69)>31)throw new Error("value is not safe integer");return 4294967296*this._view.getUint32(69)+this._view.getUint32(73)},set:function(e){this._checkFields(["version"]),this._checkVersionIsBasic(),c(e,1,9007199254740991),this._view.setInt32(73,0|e),this._view.setInt32(69,(e-this._view.getUint32(73))/4294967296),this._setFields(["value"])},enumerable:!1,configurable:!0}),e.prototype.setValue=function(e){return this.value=e,this},Object.defineProperty(e.prototype,"prefix",{get:function(){return this._checkFields(["version"]),this._checkVersionIsStruct(),this._checkFields(["prefix"]),n(this._view.getUint16(35))},set:function(e){this._checkFields(["version"]),this._checkVersionIsStruct(),this._view.setUint16(35,i(e)),this._setFields(["prefix"])},enumerable:!1,configurable:!0}),e.prototype.setPrefix=function(e){return this.prefix=e,this},Object.defineProperty(e.prototype,"name",{get:function(){return this._checkFields(["version"]),this._checkVersionIsStruct(),this._checkFields(["name"]),function(e){for(var t="",r=0;r<e.byteLength;r++)if(e[r]<128)t+=String.fromCharCode(e[r]);else if(e[r]>191&&e[r]<224)t+=String.fromCharCode((31&e[r])<<6|63&e[++r]);else if(e[r]>223&&e[r]<240)t+=String.fromCharCode((15&e[r])<<12|(63&e[++r])<<6|63&e[++r]);else{var n=((7&e[r])<<18|(63&e[++r])<<12|(63&e[++r])<<6|63&e[++r])-65536;t+=String.fromCharCode(n>>10|55296),t+=String.fromCharCode(1023&n|56320)}return t}(this._bytes.subarray(42,42+this._bytes[41]))},set:function(e){if(this._checkFields(["version"]),this._checkVersionIsStruct(),"string"!=typeof e)throw new Error("name type must be a string");var t=function(e){for(var t=[],r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t.push(n):n<2048?(t.push(192|n>>6),t.push(128|63&n)):n<55296||n>=57344?(t.push(224|n>>12),t.push(128|n>>6&63),t.push(128|63&n)):(n=65536+((1023&n)<<10)+(1023&e.charCodeAt(++r)),t.push(240|n>>18),t.push(128|n>>12&63),t.push(128|n>>6&63),t.push(128|63&n))}return new Uint8Array(t)}(e);if(t.byteLength>=36)throw new Error("name is too long");this._bytes[41]=t.byteLength,this._bytes.set(t,42),this._setFields(["name"])},enumerable:!1,configurable:!0}),e.prototype.setName=function(e){return this.name=e,this},Object.defineProperty(e.prototype,"profitPercent",{get:function(){return this._checkFields(["version"]),this._checkVersionIsStruct(),this._checkFields(["profitPercent"]),this._view.getUint16(37)},set:function(e){this._checkFields(["version"]),this._checkVersionIsStruct(),c(e,100,500),this._view.setUint16(37,e),this._setFields(["profitPercent"])},enumerable:!1,configurable:!0}),e.prototype.setProfitPercent=function(e){return this.profitPercent=e,this},Object.defineProperty(e.prototype,"feePercent",{get:function(){return this._checkFields(["version"]),this._checkVersionIsStruct(),this._checkFields(["feePercent"]),this._view.getUint16(39)},set:function(e){this._checkFields(["version"]),this._checkVersionIsStruct(),c(e,0,2e3),this._view.setUint16(39,e),this._setFields(["feePercent"])},enumerable:!1,configurable:!0}),e.prototype.setFeePercent=function(e){return this.feePercent=e,this},Object.defineProperty(e.prototype,"nonce",{get:function(){if(this._checkFields(["nonce"]),this._view.getUint16(77)>31)throw new Error("nonce is not safe integer");return 4294967296*this._view.getUint32(77)+this._view.getUint32(81)},set:function(e){c(e,0,9007199254740991),this._view.setInt32(81,0|e),this._view.setInt32(77,(e-this._view.getUint32(81))/4294967296),this._setFields(["nonce"])},enumerable:!1,configurable:!0}),e.prototype.setNonce=function(e){return this.nonce=e,this},Object.defineProperty(e.prototype,"signature",{get:function(){this._checkFields(["signature"]);var e=this.sender.publicKey.signatureLength,t=new Uint8Array(e);return t.set(this._bytes.subarray(85,85+e)),t},set:function(e){this._checkFields(["version","sender"]),f(e,this.sender.publicKey.signatureLength),this._bytes.set(e,85),this._setFields(["signature"])},enumerable:!1,configurable:!0}),e.prototype.setSignature=function(e){return this.signature=e,this},e.prototype.sign=function(e){if(this._checkFields(["version","sender"]),!(e instanceof u))throw new Error("secretKey type must be SecretKey");var t=this._bytes.subarray(0,85);return this.signature=e.sign(t),this},e.prototype.verify=function(){this._checkFields(["version","sender","signature"]);var e=this._bytes.subarray(0,85);return this.sender.publicKey.verifySignature(this.signature,e)},e}(),r=function(){function e(){this._D=new Float64Array([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),this._D2=new Float64Array([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),this._gf0=new Float64Array(16),this._gf1=new Float64Array([1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),this._L=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),this._I=new Float64Array([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]),this._X=new Float64Array([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),this._Y=new Float64Array([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214])}return Object.defineProperty(e,"PUBLIC_KEY_BYTES",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(e,"SECRET_KEY_BYTES",{get:function(){return 64},enumerable:!1,configurable:!0}),Object.defineProperty(e,"SEED_BYTES",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(e,"SIGNATURE_BYTES",{get:function(){return 64},enumerable:!1,configurable:!0}),e.prototype.sign=function(t,r){var n=new Uint8Array(e.SIGNATURE_BYTES+t.length);return this._cryptoSign(n,t,t.length,r),new Uint8Array(n.buffer,0,e.SIGNATURE_BYTES)},e.prototype.verify=function(t,r,n){var i,o=new Uint8Array(e.SIGNATURE_BYTES+r.length),s=new Uint8Array(e.SIGNATURE_BYTES+r.length);for(i=0;i<e.SIGNATURE_BYTES;i++)o[i]=t[i];for(i=0;i<r.length;i++)o[i+e.SIGNATURE_BYTES]=r[i];return this._cryptoSignOpen(s,o,o.length,n)>=0},e.prototype.secretKeyFromSeed=function(t){for(var r=new Uint8Array(e.PUBLIC_KEY_BYTES),n=new Uint8Array(e.SECRET_KEY_BYTES),i=0;i<32;i++)n[i]=t[i];return this._cryptoSignKeypair(r,n),n},e.prototype.publicKeyFromSecretKey=function(t){var r=new Uint8Array(e.PUBLIC_KEY_BYTES);return r.set(new Uint8Array(t.buffer,32,32)),r},e.prototype._add=function(e,t){var r=new Float64Array(16),n=new Float64Array(16),i=new Float64Array(16),o=new Float64Array(16),s=new Float64Array(16),a=new Float64Array(16),c=new Float64Array(16),f=new Float64Array(16),h=new Float64Array(16);this._fnZ(r,e[1],e[0]),this._fnZ(h,t[1],t[0]),this._fnM(r,r,h),this._fnA(n,e[0],e[1]),this._fnA(h,t[0],t[1]),this._fnM(n,n,h),this._fnM(i,e[3],t[3]),this._fnM(i,i,this._D2),this._fnM(o,e[2],t[2]),this._fnA(o,o,o),this._fnZ(s,n,r),this._fnZ(a,o,i),this._fnA(c,o,i),this._fnA(f,n,r),this._fnM(e[0],s,a),this._fnM(e[1],f,c),this._fnM(e[2],c,a),this._fnM(e[3],s,f)},e.prototype._car25519=function(e){for(var t,r=1,n=0;n<16;n++)t=e[n]+r+65535,r=Math.floor(t/65536),e[n]=t-65536*r;e[0]+=r-1+37*(r-1)},e.prototype._cryptoHash=function(e,t,r){var n,i=new Int32Array(8),o=new Int32Array(8),s=new Uint8Array(256),a=r;for(i[0]=1779033703,i[1]=3144134277,i[2]=1013904242,i[3]=2773480762,i[4]=1359893119,i[5]=2600822924,i[6]=528734635,i[7]=1541459225,o[0]=4089235720,o[1]=2227873595,o[2]=4271175723,o[3]=1595750129,o[4]=2917565137,o[5]=725511199,o[6]=4215389547,o[7]=327033209,this._cryptoHashBlocksHl(i,o,t,r),r%=128,n=0;n<r;n++)s[n]=t[a-r+n];for(s[r]=128,s[(r=256-128*(r<112?1:0))-9]=0,this._ts64(s,r-8,a/536870912|0,a<<3),this._cryptoHashBlocksHl(i,o,s,r),n=0;n<8;n++)this._ts64(e,8*n,i[n],o[n]);return 0},e.prototype._cryptoHashBlocksHl=function(e,t,r,n){for(var i,o,s,a,c,f,h,u,y,p,_,l,b,w,g,d,v,A,E,m,F,S,U,P,k,T,L=new Int32Array(16),O=new Int32Array(16),I=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],j=e[0],B=e[1],M=e[2],G=e[3],C=e[4],K=e[5],H=e[6],N=e[7],V=t[0],Y=t[1],x=t[2],D=t[3],R=t[4],Z=t[5],q=t[6],z=t[7],X=0;n>=128;){for(E=0;E<16;E++)m=8*E+X,L[E]=r[m+0]<<24|r[m+1]<<16|r[m+2]<<8|r[m+3],O[E]=r[m+4]<<24|r[m+5]<<16|r[m+6]<<8|r[m+7];for(E=0;E<80;E++)if(i=j,o=B,s=M,a=G,c=C,f=K,h=H,N,y=V,p=Y,_=x,l=D,b=R,w=Z,g=q,z,U=65535&(S=z),P=S>>>16,k=65535&(F=N),T=F>>>16,U+=65535&(S=(R>>>14|C<<18)^(R>>>18|C<<14)^(C>>>9|R<<23)),P+=S>>>16,k+=65535&(F=(C>>>14|R<<18)^(C>>>18|R<<14)^(R>>>9|C<<23)),T+=F>>>16,U+=65535&(S=R&Z^~R&q),P+=S>>>16,k+=65535&(F=C&K^~C&H),T+=F>>>16,U+=65535&(S=I[2*E+1]),P+=S>>>16,k+=65535&(F=I[2*E]),T+=F>>>16,F=L[E%16],P+=(S=O[E%16])>>>16,k+=65535&F,T+=F>>>16,k+=(P+=(U+=65535&S)>>>16)>>>16,U=65535&(S=A=65535&U|P<<16),P=S>>>16,k=65535&(F=v=65535&k|(T+=k>>>16)<<16),T=F>>>16,U+=65535&(S=(V>>>28|j<<4)^(j>>>2|V<<30)^(j>>>7|V<<25)),P+=S>>>16,k+=65535&(F=(j>>>28|V<<4)^(V>>>2|j<<30)^(V>>>7|j<<25)),T+=F>>>16,P+=(S=V&Y^V&x^Y&x)>>>16,k+=65535&(F=j&B^j&M^B&M),T+=F>>>16,u=65535&(k+=(P+=(U+=65535&S)>>>16)>>>16)|(T+=k>>>16)<<16,d=65535&U|P<<16,U=65535&(S=l),P=S>>>16,k=65535&(F=a),T=F>>>16,P+=(S=A)>>>16,k+=65535&(F=v),T+=F>>>16,B=i,M=o,G=s,C=a=65535&(k+=(P+=(U+=65535&S)>>>16)>>>16)|(T+=k>>>16)<<16,K=c,H=f,N=h,j=u,Y=y,x=p,D=_,R=l=65535&U|P<<16,Z=b,q=w,z=g,V=d,E%16==15)for(m=0;m<16;m++)F=L[m],U=65535&(S=O[m]),P=S>>>16,k=65535&F,T=F>>>16,F=L[(m+9)%16],U+=65535&(S=O[(m+9)%16]),P+=S>>>16,k+=65535&F,T+=F>>>16,v=L[(m+1)%16],U+=65535&(S=((A=O[(m+1)%16])>>>1|v<<31)^(A>>>8|v<<24)^(A>>>7|v<<25)),P+=S>>>16,k+=65535&(F=(v>>>1|A<<31)^(v>>>8|A<<24)^v>>>7),T+=F>>>16,v=L[(m+14)%16],P+=(S=((A=O[(m+14)%16])>>>19|v<<13)^(v>>>29|A<<3)^(A>>>6|v<<26))>>>16,k+=65535&(F=(v>>>19|A<<13)^(A>>>29|v<<3)^v>>>6),T+=F>>>16,T+=(k+=(P+=(U+=65535&S)>>>16)>>>16)>>>16,L[m]=65535&k|T<<16,O[m]=65535&U|P<<16;U=65535&(S=V),P=S>>>16,k=65535&(F=j),T=F>>>16,F=e[0],P+=(S=t[0])>>>16,k+=65535&F,T+=F>>>16,T+=(k+=(P+=(U+=65535&S)>>>16)>>>16)>>>16,e[0]=j=65535&k|T<<16,t[0]=V=65535&U|P<<16,U=65535&(S=Y),P=S>>>16,k=65535&(F=B),T=F>>>16,F=e[1],P+=(S=t[1])>>>16,k+=65535&F,T+=F>>>16,T+=(k+=(P+=(U+=65535&S)>>>16)>>>16)>>>16,e[1]=B=65535&k|T<<16,t[1]=Y=65535&U|P<<16,U=65535&(S=x),P=S>>>16,k=65535&(F=M),T=F>>>16,F=e[2],P+=(S=t[2])>>>16,k+=65535&F,T+=F>>>16,T+=(k+=(P+=(U+=65535&S)>>>16)>>>16)>>>16,e[2]=M=65535&k|T<<16,t[2]=x=65535&U|P<<16,U=65535&(S=D),P=S>>>16,k=65535&(F=G),T=F>>>16,F=e[3],P+=(S=t[3])>>>16,k+=65535&F,T+=F>>>16,T+=(k+=(P+=(U+=65535&S)>>>16)>>>16)>>>16,e[3]=G=65535&k|T<<16,t[3]=D=65535&U|P<<16,U=65535&(S=R),P=S>>>16,k=65535&(F=C),T=F>>>16,F=e[4],P+=(S=t[4])>>>16,k+=65535&F,T+=F>>>16,T+=(k+=(P+=(U+=65535&S)>>>16)>>>16)>>>16,e[4]=C=65535&k|T<<16,t[4]=R=65535&U|P<<16,U=65535&(S=Z),P=S>>>16,k=65535&(F=K),T=F>>>16,F=e[5],P+=(S=t[5])>>>16,k+=65535&F,T+=F>>>16,T+=(k+=(P+=(U+=65535&S)>>>16)>>>16)>>>16,e[5]=K=65535&k|T<<16,t[5]=Z=65535&U|P<<16,U=65535&(S=q),P=S>>>16,k=65535&(F=H),T=F>>>16,F=e[6],P+=(S=t[6])>>>16,k+=65535&F,T+=F>>>16,T+=(k+=(P+=(U+=65535&S)>>>16)>>>16)>>>16,e[6]=H=65535&k|T<<16,t[6]=q=65535&U|P<<16,U=65535&(S=z),P=S>>>16,k=65535&(F=N),T=F>>>16,F=e[7],P+=(S=t[7])>>>16,k+=65535&F,T+=F>>>16,T+=(k+=(P+=(U+=65535&S)>>>16)>>>16)>>>16,e[7]=N=65535&k|T<<16,t[7]=z=65535&U|P<<16,X+=128,n-=128}return n},e.prototype._cryptoSign=function(e,t,r,n){var i,o,s=new Uint8Array(64),a=new Uint8Array(64),c=new Uint8Array(64),f=new Float64Array(64),h=[new Float64Array(16),new Float64Array(16),new Float64Array(16),new Float64Array(16)];this._cryptoHash(s,n,32),s[0]&=248,s[31]&=127,s[31]|=64;var u=r+64;for(i=0;i<r;i++)e[64+i]=t[i];for(i=0;i<32;i++)e[32+i]=s[32+i];for(this._cryptoHash(c,e.subarray(32),r+32),this._reduce(c),this._scalarbase(h,c),this._pack(e,h),i=32;i<64;i++)e[i]=n[i];for(this._cryptoHash(a,e,r+64),this._reduce(a),i=0;i<64;i++)f[i]=0;for(i=0;i<32;i++)f[i]=c[i];for(i=0;i<32;i++)for(o=0;o<32;o++)f[i+o]+=a[i]*s[o];return this._modL(e.subarray(32),f),u},e.prototype._cryptoSignKeypair=function(e,t){var r=new Uint8Array(64),n=[new Float64Array(16),new Float64Array(16),new Float64Array(16),new Float64Array(16)];this._cryptoHash(r,t,32),r[0]&=248,r[31]&=127,r[31]|=64,this._scalarbase(n,r),this._pack(e,n);for(var i=0;i<32;i++)t[i+32]=e[i];return 0},e.prototype._cryptoSignOpen=function(e,t,r,n){var i=new Uint8Array(32),o=new Uint8Array(64),s=[new Float64Array(16),new Float64Array(16),new Float64Array(16),new Float64Array(16)],a=[new Float64Array(16),new Float64Array(16),new Float64Array(16),new Float64Array(16)];if(this._unpackneg(a,n))return-1;for(var c=0;c<r;c++)e[c]=t[c];for(c=0;c<32;c++)e[c+32]=n[c];return this._cryptoHash(o,e,r),this._reduce(o),this._scalarmult(s,a,o),this._scalarbase(a,t.subarray(32)),this._add(s,a),this._pack(i,s),this._cryptoVerify32(t,i)?-1:r},e.prototype._cryptoVerify32=function(e,t){for(var r=0,n=0;n<32;n++)r|=e[n]^t[n];return(1&r-1>>>8)-1},e.prototype._cswap=function(e,t,r){for(var n=0;n<4;n++)this._sel25519(e[n],t[n],r)},e.prototype._fnA=function(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]+r[n]},e.prototype._fnM=function(e,t,r){for(var n=new Float64Array(31),i=0;i<31;i++)n[i]=0;for(i=0;i<16;i++)for(var o=0;o<16;o++)n[i+o]+=t[i]*r[o];for(i=0;i<15;i++)n[i]+=38*n[i+16];for(i=0;i<16;i++)e[i]=n[i];this._car25519(e),this._car25519(e)},e.prototype._fnS=function(e,t){this._fnM(e,t,t)},e.prototype._fnZ=function(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]-r[n]},e.prototype._inv25519=function(e,t){for(var r=new Float64Array(16),n=0;n<16;n++)r[n]=t[n];for(n=253;n>=0;n--)this._fnS(r,r),2!==n&&4!==n&&this._fnM(r,r,t);for(n=0;n<16;n++)e[n]=r[n]},e.prototype._modL=function(e,t){for(var r,n,i,o=63;o>=32;--o){for(r=0,n=o-32,i=o-12;n<i;++n)t[n]+=r-16*t[o]*this._L[n-(o-32)],r=Math.floor((t[n]+128)/256),t[n]-=256*r;t[n]+=r,t[o]=0}r=0;for(var s=0;s<32;s++)t[s]+=r-(t[31]>>4)*this._L[s],r=t[s]>>8,t[s]&=255;for(var a=0;a<32;a++)t[a]-=r*this._L[a];for(o=0;o<32;o++)t[o+1]+=t[o]>>8,e[o]=255&t[o]},e.prototype._neq25519=function(e,t){var r=new Uint8Array(32),n=new Uint8Array(32);return this._pack25519(r,e),this._pack25519(n,t),this._cryptoVerify32(r,n)},e.prototype._pack=function(e,t){var r=new Float64Array(16),n=new Float64Array(16),i=new Float64Array(16);this._inv25519(i,t[2]),this._fnM(r,t[0],i),this._fnM(n,t[1],i),this._pack25519(e,n),e[31]^=this._par25519(r)<<7},e.prototype._pack25519=function(e,t){for(var r,n=new Float64Array(16),i=new Float64Array(16),o=0;o<16;o++)i[o]=t[o];this._car25519(i),this._car25519(i),this._car25519(i);for(var s=0;s<2;s++){n[0]=i[0]-65517;for(o=1;o<15;o++)n[o]=i[o]-65535-(n[o-1]>>16&1),n[o-1]&=65535;n[15]=i[15]-32767-(n[14]>>16&1),r=n[15]>>16&1,n[14]&=65535,this._sel25519(i,n,1-r)}for(o=0;o<16;o++)e[2*o]=255&i[o],e[2*o+1]=i[o]>>8},e.prototype._par25519=function(e){var t=new Uint8Array(32);return this._pack25519(t,e),1&t[0]},e.prototype._pow2523=function(e,t){for(var r=new Float64Array(16),n=0;n<16;n++)r[n]=t[n];for(n=250;n>=0;n--)this._fnS(r,r),1!==n&&this._fnM(r,r,t);for(n=0;n<16;n++)e[n]=r[n]},e.prototype._reduce=function(e){for(var t=new Float64Array(64),r=0;r<64;r++)t[r]=e[r];for(r=0;r<64;r++)e[r]=0;this._modL(e,t)},e.prototype._scalarbase=function(e,t){var r=[new Float64Array(16),new Float64Array(16),new Float64Array(16),new Float64Array(16)];this._set25519(r[0],this._X),this._set25519(r[1],this._Y),this._set25519(r[2],this._gf1),this._fnM(r[3],this._X,this._Y),this._scalarmult(e,r,t)},e.prototype._scalarmult=function(e,t,r){var n;this._set25519(e[0],this._gf0),this._set25519(e[1],this._gf1),this._set25519(e[2],this._gf1),this._set25519(e[3],this._gf0);for(var i=255;i>=0;--i)n=r[i/8|0]>>(7&i)&1,this._cswap(e,t,n),this._add(t,e),this._add(e,e),this._cswap(e,t,n)},e.prototype._sel25519=function(e,t,r){for(var n,i=~(r-1),o=0;o<16;o++)n=i&(e[o]^t[o]),e[o]^=n,t[o]^=n},e.prototype._set25519=function(e,t){for(var r=0;r<16;r++)e[r]=t[r]},e.prototype._ts64=function(e,t,r,n){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r,e[t+4]=n>>24&255,e[t+5]=n>>16&255,e[t+6]=n>>8&255,e[t+7]=255&n},e.prototype._unpack25519=function(e,t){for(var r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767},e.prototype._unpackneg=function(e,t){var r=new Float64Array(16),n=new Float64Array(16),i=new Float64Array(16),o=new Float64Array(16),s=new Float64Array(16),a=new Float64Array(16),c=new Float64Array(16);return this._set25519(e[2],this._gf1),this._unpack25519(e[1],t),this._fnS(i,e[1]),this._fnM(o,i,this._D),this._fnZ(i,i,e[2]),this._fnA(o,e[2],o),this._fnS(s,o),this._fnS(a,s),this._fnM(c,a,s),this._fnM(r,c,i),this._fnM(r,r,o),this._pow2523(r,r),this._fnM(r,r,i),this._fnM(r,r,o),this._fnM(r,r,o),this._fnM(e[0],r,o),this._fnS(n,e[0]),this._fnM(n,n,o),this._neq25519(n,i)&&this._fnM(e[0],e[0],this._I),this._fnS(n,e[0]),this._fnM(n,n,o),this._neq25519(n,i)?-1:(this._par25519(e[0])===t[31]>>7&&this._fnZ(e[0],this._gf0,e[0]),this._fnM(e[3],e[0],e[1]),0)},e}();function n(e){if(c(e,0,65535),0===e)return"genesis";if(32768==(32768&e))throw new Error("incorrect version - first bit must be zero");var t=(31744&e)>>10,r=(992&e)>>5,n=31&e;return o([t,r,n]),String.fromCharCode(t+96,r+96,n+96)}function i(e){if("genesis"===e)return 0;!function(e,t){if("string"!=typeof e)throw new Error("incorrect type");if(void 0!==t&&e.length!==t)throw new Error("incorrect length")}(e,3);var t=e.charCodeAt(0)-96,r=e.charCodeAt(1)-96,n=e.charCodeAt(2)-96;return o([t,r,n]),(t<<10)+(r<<5)+n}function o(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];if(n<1||n>26)throw new Error("incorrect prefix")}}function s(e){var t=new Int32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),r=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),n=new Int32Array(64),i=e.byteLength+8;i+=64-i%64;var o=new Uint8Array(i),s=new DataView(o.buffer);o.set(e),o[e.byteLength]=128,s.setUint32(s.byteLength-4,8*e.byteLength);for(var a=0;a<o.byteLength;a+=64){for(var c=0;c<16;c++)n[c]=s.getInt32(a+4*c);for(c=16;c<64;c++){var f=(n[c-15]>>>7|n[c-15]<<25)^(n[c-15]>>>18|n[c-15]<<14)^n[c-15]>>>3,h=(n[c-2]>>>17|n[c-2]<<15)^(n[c-2]>>>19|n[c-2]<<13)^n[c-2]>>>10;n[c]=n[c-16]+f+n[c-7]+h}var u=t[0],y=t[1],p=t[2],_=t[3],l=t[4],b=t[5],w=t[6],g=t[7];for(c=0;c<64;c++){var d=((u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10))+(u&y^u&p^y&p),v=g+((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))+(l&b^~l&w)+r[c]+n[c];g=w,w=b,b=l,l=_+v,_=p,p=y,y=u,u=v+d}t[0]+=u,t[1]+=y,t[2]+=p,t[3]+=_,t[4]+=l,t[5]+=b,t[6]+=w,t[7]+=g}var A=new DataView(t.buffer);for(c=0;c<8;c++)A.setUint32(4*c,t[c]);return new Uint8Array(A.buffer)}var a=function(){function e(){}return Object.defineProperty(e,"_ALPHABET",{get:function(){return"qpzry9x8gf2tvdw0s3jn54khce6mua7l"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"_ALPHABET_MAP",{get:function(){return{0:15,2:10,3:17,4:21,5:20,6:26,7:30,8:7,9:5,q:0,p:1,z:2,r:3,y:4,x:6,g:8,f:9,t:11,v:12,d:13,w:14,s:16,j:18,n:19,k:22,h:23,c:24,e:25,m:27,u:28,a:29,l:31}},enumerable:!1,configurable:!0}),e.encode=function(e){var t=n(new DataView(e.buffer).getUint16(0)),r=new Uint8Array(e.subarray(2));return this._encode(t,this._convert(r,8,5,!0))},e.decode=function(e){var t=this._decode(e),r=this._convert(t.words,5,8,!1);if(32!==r.length)throw new Error("invalid data length");var n=new Uint8Array(34);return n.set(r,2),new DataView(n.buffer).setUint16(0,i(t.prefix)),n},e._encode=function(e,t){e=e.toLowerCase();for(var r,n=this._prefixChk(e),i=e+"1",o=0,s=t;o<s.length;o++)r=s[o],n=this._polymodStep(n)^r,i+=this._ALPHABET.charAt(r);for(var a=0;a<6;++a)n=this._polymodStep(n);n^=1;for(a=0;a<6;++a){var c=n>>5*(5-a)&31;i+=this._ALPHABET.charAt(c)}return i},e._decode=function(e){var t=e.toLowerCase(),r=e.toUpperCase();if(e!==t&&e!==r)throw new Error("Mixed-case string "+e);var n=(e=t).lastIndexOf("1");if(-1===n)throw new Error("No separator character for "+e);if(0===n)throw new Error("Missing prefix for "+e);var i=e.slice(0,n),o=e.slice(n+1);if(o.length<6)throw new Error("Data too short");for(var s=this._prefixChk(i),a=[],c=0;c<o.length;++c){var f=o.charAt(c),h=this._ALPHABET_MAP[f];if(void 0===h)throw new Error("Unknown character "+f);s=this._polymodStep(s)^h,c+6>=o.length||a.push(h)}if(1!==s)throw new Error("Invalid checksum for "+e);return{prefix:i,words:new Uint8Array(a)}},e._polymodStep=function(e){var t=e>>25;return(33554431&e)<<5^996825010&-(t>>0&1)^642813549&-(t>>1&1)^513874426&-(t>>2&1)^1027748829&-(t>>3&1)^705979059&-(t>>4&1)},e._prefixChk=function(e){for(var t=1,r=0;r<e.length;++r){var n=e.charCodeAt(r);if(n<33||n>126)throw Error("Invalid prefix ("+e+")");t=this._polymodStep(t)^n>>5}t=this._polymodStep(t);for(r=0;r<e.length;++r){var i=e.charCodeAt(r);t=this._polymodStep(t)^31&i}return t},e._convert=function(e,t,r,n){for(var i=0,o=0,s=(1<<r)-1,a=[],c=0;c<e.byteLength;c++)for(i=i<<t|e[c],o+=t;o>=r;)o-=r,a.push(i>>o&s);if(n)o>0&&a.push(i<<r-o&s);else{if(o>=t)throw new Error("Excess padding");if(i<<r-o&s)throw new Error("Non-zero padding")}return a},e}();function c(e,t,r){if("number"!=typeof e)throw new Error("incorrect type");if(Math.floor(e)!==e)throw new Error("not integer");if(e<t||e>r)throw new Error("incorrect value")}function f(e,t){if(!(e instanceof Uint8Array))throw new Error("incorrect type");if(void 0!==t&&e.byteLength!==t)throw new Error("incorrect length")}var h=function(){function e(t){this._bytes=new Uint8Array(e.LENGTH),f(t,e.LENGTH),this._bytes.set(t)}return Object.defineProperty(e,"LENGTH",{get:function(){return r.PUBLIC_KEY_BYTES},enumerable:!1,configurable:!0}),Object.defineProperty(e,"SIGNATURE_LENGTH",{get:function(){return r.SIGNATURE_BYTES},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"signatureLength",{get:function(){return e.SIGNATURE_LENGTH},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bytes",{get:function(){var e=new Uint8Array(this._bytes.byteLength);return e.set(this._bytes),e},enumerable:!1,configurable:!0}),e.prototype.verifySignature=function(t,n){return f(t,e.SIGNATURE_LENGTH),f(n),(new r).verify(t,n,this._bytes)},e}(),u=function(){function e(t){if(this._bytes=new Uint8Array(e.LENGTH),!(t instanceof Uint8Array))throw new Error("bytes type must be Uint8Array");if(t.byteLength!==e.LENGTH)throw new Error("bytes length must be 64 bytes");this._bytes.set(t)}return Object.defineProperty(e,"LENGTH",{get:function(){return r.SECRET_KEY_BYTES},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bytes",{get:function(){var e=new Uint8Array(this._bytes.byteLength);return e.set(this._bytes),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"publicKey",{get:function(){return new h((new r).publicKeyFromSecretKey(this._bytes))},enumerable:!1,configurable:!0}),e.prototype.sign=function(e){if(!(e instanceof Uint8Array))throw new Error("message type must be Uint8Array");return(new r).sign(e,this._bytes)},e.fromSeed=function(t){if(!(t instanceof Uint8Array))throw new Error("seed must be Uint8Array");if(t.byteLength>128)throw new Error("seed length must be not greater than 128 bytes");return t.byteLength===r.SEED_BYTES?new e((new r).secretKeyFromSeed(t)):new e((new r).secretKeyFromSeed(s(t)))},e}(),y=function(){function e(t){if(this._bytes=new Uint8Array(e.LENGTH),void 0===t)this.version=e.Umi;else{if(!(t instanceof Uint8Array))throw new Error("bytes type must be Uint8Array");if(t.byteLength!==e.LENGTH)throw new Error("bytes length must be 34 bytes");this._bytes.set(t)}}return Object.defineProperty(e,"LENGTH",{get:function(){return 34},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Genesis",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Umi",{get:function(){return 21929},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bytes",{get:function(){var e=new Uint8Array(this._bytes.byteLength);return e.set(this._bytes),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return new DataView(this._bytes.buffer).getUint16(0)},set:function(e){n(e),new DataView(this._bytes.buffer).setUint16(0,32767&e)},enumerable:!1,configurable:!0}),e.prototype.setVersion=function(e){return this.version=e,this},Object.defineProperty(e.prototype,"publicKey",{get:function(){return new h(this._bytes.subarray(2))},set:function(e){if(!(e instanceof h))throw new Error("publicKey type must be PublicKey");this._bytes.set(e.bytes,2)},enumerable:!1,configurable:!0}),e.prototype.setPublicKey=function(e){return this.publicKey=e,this},Object.defineProperty(e.prototype,"prefix",{get:function(){return n(this.version)},set:function(e){this.version=i(e)},enumerable:!1,configurable:!0}),e.prototype.setPrefix=function(e){return this.prefix=e,this},Object.defineProperty(e.prototype,"bech32",{get:function(){return a.encode(this._bytes)},set:function(e){if("string"!=typeof e)throw new Error("bech32 type must be a string");this._bytes.set(a.decode(e))},enumerable:!1,configurable:!0}),e.prototype.setBech32=function(e){return this.bech32=e,this},e.fromBech32=function(t){return(new e).setBech32(t)},e.fromKey=function(t){if(t instanceof u)return(new e).setPublicKey(t.publicKey);if(t instanceof h)return(new e).setPublicKey(t);throw new Error("key type must be PublicKey or SecretKey")},e}(),p=function(){},_=function(){};return e.Address=y,e.Block=p,e.BlockHeader=_,e.PublicKey=h,e.SecretKey=u,e.Transaction=t,e}({});
